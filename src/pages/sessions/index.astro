---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const sessions = await getCollection('sessions');
const sorted = sessions.sort((a, b) => b.data.sessionNumber - a.data.sessionNumber);
---

<BaseLayout title="Sessions">
  <div class="page-container">
    <div class="section-header"><h1>Session Notes</h1></div>
    <p style="color:var(--text-muted);margin-bottom:2rem;">A record of every session ‚Äî the glorious moments, the disasters, and everything in between.</p>
    <div class="session-list">
      {sorted.map(s => (
        <a href={`/sessions/${s.slug}`} class="card session-card">
          <div class="session-num">Session {s.data.sessionNumber}</div>
          <h3>{s.data.title}</h3>
          {s.data.location && <div class="session-loc">üìç {s.data.location}</div>}
          {s.data.summary && <p class="session-summary">{s.data.summary}</p>}
          <span class="read-more">Read ‚Üí</span>
        </a>
      ))}
    </div>
  </div>
</BaseLayout>

<style>
.session-list { display: flex; flex-direction: column; gap: 1rem; }
.session-card { display: block; text-decoration: none; }
.session-num { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 0.25rem; }
.session-card h3 { color: var(--text-gold); margin-bottom: 0.4rem; }
.session-loc { font-size: 0.82rem; color: var(--text-muted); margin-bottom: 0.5rem; }
.session-summary { color: var(--text-parchment); font-size: 0.88rem; line-height: 1.6; margin-bottom: 0.75rem; }
.read-more { color: var(--text-gold); font-size: 0.82rem; }
</style>
