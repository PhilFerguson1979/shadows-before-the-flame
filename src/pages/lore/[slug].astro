---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const lore = await getCollection('lore');
  return lore.map(entry => ({ params: { slug: entry.slug }, props: { entry } }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={entry.data.title}>
  <div class="page-container">
    <div class="back-link"><a href="/lore">‚Üê Lore</a></div>
    {entry.data.category && <div class="lore-cat">{entry.data.category}</div>}
    <h1>{entry.data.title}</h1>
    <hr />
    <div class="prose"><Content /></div>
  </div>
</BaseLayout>

<style>
.back-link { margin-bottom: 1.5rem; }
.back-link a { color: var(--text-muted); font-size: 0.85rem; }
.back-link a:hover { color: var(--text-gold); }
.lore-cat { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 0.3rem; }
</style>
